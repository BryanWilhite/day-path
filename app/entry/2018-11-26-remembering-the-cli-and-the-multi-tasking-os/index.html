<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <meta name="description" content="my technical Blog ✒ for my studio" />
        <meta name="robots" content="index, follow" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <meta name="google-site-verification" content="MyXJp0qYgoTSi472GCarwPFWqvRZAo8khVV_FXV33tI" />
        <meta name="msvalidate.01" content="9C08B066B4967EBE515E0CC7C146DE30" />

        <base href="http://songhayblog.azurewebsites.net/" />

        <link rel="canonical" href="http://songhayblog.azurewebsites.net/" />
        <link rel="alternate" type="application/atom+xml" title="day path" href="/entry/feed.xml" />
        <link rel="SHORTCUT ICON" href="http://songhayblog.azurewebsites.net/image/favicon.ico" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
        <link href="http://songhayblog.azurewebsites.net/style/styles.min.css" rel="stylesheet" />

        <script src="http://songhayblog.azurewebsites.net/script/index.min.js"></script>

        <title>remembering the CLI and the multi-tasking OS - day path</title>
    </head>

    <body class="mdc-typography">
        <header class="mdc-top-app-bar mdc-top-app-bar--short">
            <div class="mdc-top-app-bar__row">
                <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
                    <a href="http://songhayblog.azurewebsites.net/" class="material-icons mdc-top-app-bar__navigation-icon">first_page</a>
                    <span class="mdc-top-app-bar__title">day path</span>
                </section>
                <section class="description mdc-top-app-bar__section mdc-top-app-bar__section--align-end">
                    my technical Blog ✒ for my studio
                </section>
            </div>
        </header>
        <main class="mdc-layout-grid" id="main-content">
            <section class="entry">

    <h1>remembering the CLI and the multi-tasking OS</h1>
<img alt="alt" src="https://gvpydw.dm.files.1drv.com/y4m0QbX_3OZ3bIXFZdVDRIVVWxA4VU6sg3vH7Fgsm-efThCNwPzmp25WvF7krIEXsFvh3-q9-4s3exZtn5BNQ4JN3BK1Ia1EebYh3j5I_27kUw5gxMq5v7xcWhioRsv2pt4gvnsQvt_DhC2pGIwCuGWTpWTHpc5h1jD1gNtIA6e0zuf__XFl_JnxbM05zlq5jWJRhBQ1o8mQpIojD253uGOcQ?width=371&height=660&cropmode=none" style="float:right;margin:16px;" width="371" height="660">
<p>I have literally paid the price for forgetting about the wonders of a <a href="https://en.wikipedia.org/wiki/Computer_multitasking">multitasking</a> Operating System and how the <a href="https://en.wikipedia.org/wiki/Common_Language_Infrastructure">Common Language Infrastructure</a> (CLI) takes advantage of such a thing for my benefit. And when I mean “literally paid” I am talking about the intricacies of the job interview. For at least one job opportunity, I have failed to take the time to sit down, draw a picture and wax poetic about the whole reason why the execution of my code is possible, leaving extremely busy hiring managers to assume that I care little about such a wondrous thing.</p>
<p>First, according to the academic custom, I must empty the universe of almost everything and begin with a single statement:</p>
<blockquote>
<p>A multitasking Operating System can <em>schedule</em> a CLI Task with its Thread.</p>
</blockquote>
<h2>thread scheduling</h2>
<p><a href="https://en.wikipedia.org/wiki/Scheduling_(computing)">Scheduling</a> is fundamental to computation itself. It crosses the boundary between abstract logic and real computing resources under the control of a multitasking <a href="https://en.wikipedia.org/wiki/Operating_system">Operating System</a> (OS). Scheduling is not just about time; it is about the time when computing resources will be available.</p>
<p>Both the <em>Task</em> and the <em>Thread</em> (coincidentally?) exist in the abstract logic of the computer <a href="https://en.wikipedia.org/wiki/List_of_CLI_languages">programming language(s) of the CLI</a> and in the OS. The confusion may start when we must see that:</p>
<ul>
<li>in the OS, the Task or <a href="https://en.wikipedia.org/wiki/Process_(computing)">Process</a> is an <em>entire</em> computer program, composed of one or more <a href="https://en.wikipedia.org/wiki/Thread_(computing)">threads</a></li>
<li>in the CLI, the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task?view=netstandard-2.0">Task</a> is a grouping of <a href="https://en.wikipedia.org/wiki/Statement_(computer_science)">statements and/or expressions</a>, running on a <a href="https://docs.microsoft.com/en-us/dotnet/api/system.threading.thread?redirectedfrom=MSDN&amp;view=netstandard-2.0">Thread</a> (usually asynchronously)</li>
</ul>
<h2>threads of the AppDomain</h2>
<blockquote>
<p>The CLI groups threads together in an isolated environment called the <code>AppDomain</code> [<a href="https://docs.microsoft.com/en-us/dotnet/api/system.appdomain?redirectedfrom=MSDN&amp;view=netcore-2.1">docs</a>]; the OS can see several AppDomain instances in a single process.</p>
</blockquote>
<p>One leading benefit of the CLI insinuating itself between OS processes and threads is to reduce the cost of <a href="https://en.wikipedia.org/wiki/Context_switch">context switching</a>, especially in the traditional, <a href="https://en.wikipedia.org/wiki/Single-core">single core</a> processor system.</p>
<p>Another benefit, is the single <a href="https://en.wikipedia.org/wiki/Execution_model">execution model</a> implemented in the <a href="https://en.wikipedia.org/wiki/Common_Language_Runtime">Common Language Runtime</a> (CLR), featuring its <a href="https://en.wikipedia.org/wiki/Just-in-time_compilation">Just-in-Time (JIT) compilation</a>. The CLR can be thought of as one throat to choke when it comes to security issues around the successful isolation of the <code>AppDomain</code>.</p>
<h2>threads of the thread pool</h2>
<p>Most threads for most programmers come from a <a href="https://en.wikipedia.org/wiki/Thread_pool">thread pool</a> which is a <a href="https://en.wikipedia.org/wiki/Task_queue">task queue</a> related to the all-important scheduling mentioned above. Windows programmers who are familiar with <a href="https://www.microsoft.com/en-us/sql-server/sql-server-2017?&amp;OCID=AID739534_SEM_RNDRbyuB">SQL Server</a> or <a href="https://www.iis.net/">Internet Information Server</a> (IIS) will have been introduced to the thread pool concept. According to Joe Duffy, in <em><a href="https://www.amazon.com/Concurrent-Programming-Windows-Joe-Duffy/dp/032143482X?SubscriptionId=1SW6D7X6ZXXR92KVX0G2&amp;tag=thekintespacec00&amp;linkCode=xm2&amp;camp=2025&amp;creative=165953&amp;creativeASIN=032143482X">Concurrent Programming on Windows</a></em>:</p>
<blockquote>
<p>Both Windows and the CLR offer different variants of the thread pool idea that are entirely different components and provide different APIs.</p>
</blockquote>
<p>On the <a href="https://en.wikipedia.org/wiki/Client-side">client side</a>, Windows Windows Presentation Foundation (WPF) is <a href="https://docs.microsoft.com/en-us/dotnet/framework/wpf/advanced/threading-model">designed with two default threads</a>, one for handling rendering and another for “managing the UI”—this latter thread borrows from the tradition of the <a href="https://en.wikipedia.org/wiki/Event_loop">event loop</a>, leading developers down into the often slippery slope of <a href="https://en.wikipedia.org/wiki/Event-driven_programming">event driven programming</a> for the <a href="https://en.wikipedia.org/wiki/Graphical_user_interface">Graphical User Interface</a> (GUI).</p>
<h2>thread safety</h2>
<p><a href="https://en.wikipedia.org/wiki/Thread_safety">Thread safety</a> is about preventing <a href="https://en.wikipedia.org/wiki/Race_condition#Computing">race conditions</a> and <a href="https://en.wikipedia.org/wiki/Deadlock">deadlocks</a>. Chapter 11 of Joe Duffy’s book, “Concurrency Hazards,” groups race conditions and deadlocks under “correctness hazards” and “liveness hazards,” respectively.</p>
<h2>thread memory allocation and the Garbage Collector</h2>
<p>Chapter three of Duffy’s book, “Threads,” states:</p>
<blockquote>
<p>Coincidentally, each .NET program is actually multithreaded from the start because the <a href="https://msdn.microsoft.com/en-us/library/ms973837.aspx?f=255&amp;MSPPError=-2147217396">CLR garbage collector</a> uses a separate <em>finalizer</em> thread to reclaim resources.</p>
</blockquote>
<p>We could say then that the CLR uses/provides a thread to remove memory allocations generated by <em>other</em> managed threads. These allocations are partitioned in the Garbage Collector (GC) into <em>generations</em>. The older (higher-number) generations are more likely to be ‘finalized’ than younger ones.</p>
<p>There are two leading disadvantages to the use of the GC:</p>
<ol>
<li>several times more memory is required (as much as five times, according to <a href="https://en.wikipedia.org/wiki/Garbage_collection_(computer_science)#cite_note-5">Matthew Hertz and Emery D. Berger (2005)</a>)</li>
<li>noticeable delays when generations reach millions</li>
</ol>
<h2>type safety</h2>
<p>Before threads can be scheduled at runtime, the compile time of the Common Language Infrastructure ensures <a href="https://en.wikipedia.org/wiki/Type_safety">type safety</a>, starting with the <a href="https://en.wikipedia.org/wiki/Common_Type_System">Common Type System</a> (CTS) and leading into well-typed rules of <a href="https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)">covariance and contravariance</a>.</p>
<p>@<a href="https://twitter.com/BryanWilhite">BryanWilhite</a></p>


</section>
<section class="meta">
    <span class="entry-date"> <strong>incept date:</strong> EEEE, MMMM d, y </span>
</section>
        </main>
        <footer>
            <div class="col-sm-8">
                <p>
                    Last Reviewed:
                    2018-11-26T20:22:15.677Z
                </p>
                <p>
                    Another stone tribal move by <a class="welcome" href="http://songhaysystem.com/">Songhay System</a>
                </p>
            </div>
            <div class="col-sm-4">
                <a href="http://twitter.com/BryanWilhite" target="_blank" title="@BryanWilhite">
                    <span class="zocial twitter icon"></span>
                </a>
                <a href="http://songhayblog.azurewebsites.net/entry/feed.xml" target="_blank" title="Atom feed">
                    <span class="zocial rss icon"></span>
                </a>
            </div>
        </footer>
    </body>

</html>