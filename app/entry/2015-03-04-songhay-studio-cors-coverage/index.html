<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <meta name="description" content="my technical Blog ✒ for my studio" />
        <meta name="robots" content="index, follow" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <meta name="google-site-verification" content="MyXJp0qYgoTSi472GCarwPFWqvRZAo8khVV_FXV33tI" />
        <meta name="msvalidate.01" content="9C08B066B4967EBE515E0CC7C146DE30" />

        <base href="http://songhayblog.azurewebsites.net/" />

        <link rel="canonical" href="http://songhayblog.azurewebsites.net/" />
        <link rel="alternate" type="application/atom+xml" title="day path" href="/entry/feed.xml" />
        <link rel="SHORTCUT ICON" href="http://songhayblog.azurewebsites.net/image/favicon.ico" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
        <link href="http://songhayblog.azurewebsites.net/style/styles.min.css" rel="stylesheet" />

        <script src="http://songhayblog.azurewebsites.net/script/index.min.js"></script>

        <title>Songhay Studio: CORS Coverage - day path</title>
    </head>

    <body class="mdc-typography">
        <header class="mdc-top-app-bar mdc-top-app-bar--short">
            <div class="mdc-top-app-bar__row">
                <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
                    <a href="http://songhayblog.azurewebsites.net/" class="material-icons mdc-top-app-bar__navigation-icon">first_page</a>
                    <span class="mdc-top-app-bar__title">day path</span>
                </section>
                <section class="description mdc-top-app-bar__section mdc-top-app-bar__section--align-end">
                    my technical Blog ✒ for my studio
                </section>
            </div>
        </header>
        <main class="mdc-layout-grid" id="main-content">
            <section class="entry">

    <h1>Songhay Studio: CORS Coverage</h1>
<p>There are three areas where Cross-origin resource sharing (<a href="http://en.wikipedia.org/wiki/Cross-origin_resource_sharing">CORS</a>) must be configured in the Songhay System:</p>
<ol>
<li>Azure Blob Storage</li>
<li>Web API</li>
<li>Apache <code>.htaccess</code></li>
</ol>
<h2>Azure Blob Storage</h2>
<p>Currently I am calling <code>CloudBlobClient.SetServiceProperties()</code> to allow selected origins from a typical integration test. I suppose that can be a Web Job from <a href="http://songhayindex.azurewebsites.net/">Songhay Index</a> but it’s not really a pressing issue.</p>
<p>CORS for blob storage is currently needed to expose a very small Web font collection (which is quite exciting for me since I’ve been a font lover since before the meme “desktop publishing” was spoken is cutting-edge seriousness).</p>
<h2>Web API</h2>
<p>The NuGet <a href="http://www.nuget.org/packages/Microsoft.AspNet.WebApi.Cors/">package</a> <code>Microsoft.AspNet.WebApi.Cors</code> allows me to declare the <code>EnableCors</code> attribute on my <code>ApiController</code> to allow selected origins. My <a href="http://songhayindex.azurewebsites.net/">Songhay Index</a> Web API controllers stand in front of the content in Azure Blob Storage.</p>
<p>CORS for Web API is currently needed to expose JSON blobs (specifically, <code>DisplayItemModel</code> indices) for Web-based clients.</p>
<h2>Apache .htaccess</h2>
<p>I had the choice of configuring CORS in the <code>httpd.config</code> file(s) (I use XAMPP on Ubuntu) or simply with <code>.htaccess</code>. I went with <code>.htaccess</code> like this:</p>
<pre><code class="language-plaintext">SetEnvIfNoCase Origin &quot;https?://(www\.)?(mysite1\.com|songhaysystem\.com|mysite2\.io)(:\d+)?$&quot; AccessControlAllowOrigin=$0
Header add Access-Control-Allow-Origin %{AccessControlAllowOrigin}e env=AccessControlAllowOrigin
Header add Access-Control-Allow-Methods: &quot;GET,POST,OPTIONS,DELETE,PUT&quot;
</code></pre>
<p>I am currently experimenting with CORS as I continue the work toward re-releasing kintespace.com. It’s interesting <a href="http://codepen.io/rasx/pen/ykDGi">to see</a> that Angular JS, its <code>$sce.trustAsResourceUrl()</code> method, can be used to load XHTML5 files directly into another web page. Simultaneously, Web API can be used to load static XHTML5 files, shred them into JSON and (Redis?) cache them for repurposing.</p>
<p>@<a href="https://twitter.com/BryanWilhite">BryanWilhite</a></p>


</section>
<section class="meta">
    <span class="entry-date"> <strong>incept date:</strong> EEEE, MMMM d, y </span>
</section>
        </main>
        <footer>
            <div class="col-sm-8">
                <p>
                    Last Reviewed:
                    2015-03-04T08:00:00.000Z
                </p>
                <p>
                    Another stone tribal move by <a class="welcome" href="http://songhaysystem.com/">Songhay System</a>
                </p>
            </div>
            <div class="col-sm-4">
                <a href="http://twitter.com/BryanWilhite" target="_blank" title="@BryanWilhite">
                    <span class="zocial twitter icon"></span>
                </a>
                <a href="http://songhayblog.azurewebsites.net/entry/feed.xml" target="_blank" title="Atom feed">
                    <span class="zocial rss icon"></span>
                </a>
            </div>
        </footer>
    </body>

</html>