<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <meta name="description" content="my technical Blog ✒ for my studio" />
        <meta name="robots" content="index, follow" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <meta name="google-site-verification" content="MyXJp0qYgoTSi472GCarwPFWqvRZAo8khVV_FXV33tI" />
        <meta name="msvalidate.01" content="9C08B066B4967EBE515E0CC7C146DE30" />

        <base href="http://songhayblog.azurewebsites.net/" />

        <link rel="canonical" href="http://songhayblog.azurewebsites.net/" />
        <link rel="alternate" type="application/atom+xml" title="day path" href="/entry/feed.xml" />
        <link rel="SHORTCUT ICON" href="http://songhayblog.azurewebsites.net/image/favicon.ico" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
        <link href="http://songhayblog.azurewebsites.net/style/styles.min.css" rel="stylesheet" />

        <script src="http://songhayblog.azurewebsites.net/script/index.min.js"></script>

        <title>MenuItemDatum, NameValuePair and ChartDataPoints. - day path</title>
    </head>

    <body class="mdc-typography">
        <header class="mdc-top-app-bar mdc-top-app-bar--short">
            <div class="mdc-top-app-bar__row">
                <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
                    <a href="http://songhayblog.azurewebsites.net/" class="material-icons mdc-top-app-bar__navigation-icon">first_page</a>
                    <span class="mdc-top-app-bar__title">day path</span>
                </section>
                <section class="description mdc-top-app-bar__section mdc-top-app-bar__section--align-end">
                    my technical Blog ✒ for my studio
                </section>
            </div>
        </header>
        <main class="mdc-layout-grid" id="main-content">
            <section class="entry">

    <h1>MenuItemDatum, NameValuePair and ChartDataPoints.</h1>
<p>I developed <code>MenuItemDatum</code>, <code>NameValuePair</code> and <code>ChartDataPoints</code> as common data transfer objects over <acronym title="Windows Communication Foundation">WCF</acronym>-based technologies, including RIA Services. I’m sure this effort to develop ‘common’ objects to be shared among various enterprise solutions is not the first one in the world. I came to this place because of a key limitation in RIA Services (and/or Entity Framework): ‘<a href="http://songhayblog.azurewebsites.net/entry/show/ria-services-and-ef-entities">By default, an EF Entity cannot be a property of another object.</a>’ This limitation alone should inspire many of us to send a relatively large ‘meta’ dataset to the Client to “bootstrap” the application. I usually call this ‘meta’ dataset <code>ClientMetadata</code>.</p>
<p>Here’s a sample <code>ClientMetadata</code> class:</p>
<pre><code class="language-c#">public class ClientMetadata
{
    public IEnumerable&lt;NameValuePair&gt; Attributes { get; set; }
    public IEnumerable&lt;MenuItemDatum&gt; MainMenu { get; set; }
    public IEnumerable&lt;MenuItemDatum&gt; Departments { get; set; }
    public IEnumerable&lt;ChartDataPoints&gt; ChartsData { get; set; }
}
</code></pre>
<p>A <code>ClientMetadata</code> object passed over “the wire” hydrates the <code>ClientViewModel</code> in my Silverlight applications. This class definition intends to imply that:</p>
<ul>
<li>The Main Menu and Departments are to be represented as Menu items.</li>
<li>One set of data defines chart data for multiple charts.</li>
<li>Multiple items from multiple database entities can be “shredded” into attributes as name-value pairs.</li>
</ul>
<h2>What is a Menu Item Datum?</h2>
<p>We must remember that in English (and Latin) the word <em>data</em> denotes plural and <em>datum</em>, singular. So my intention is to define the <em>datum</em> referring to data of the domain (usually entities). <code>MenuItemDatum</code> is a lightweight ‘pointer’ to an Entity. When the <acronym title="User Interface">UI</acronym> displays a list box of Departments, the <code>MenuItemDatum</code> is used to ‘point’ to its respective Department Entity on the server. It is too expensive to send the entire Entity to the Client just for a stupid list box—the <code>MenuItemDatum</code> is here to represent a small ‘reference’ to the real stuff on the Server.</p>
<h2>Why convert a NameValuePair into a Dictionary? It’s a XAML thing…</h2>
<p>To me, this XAML binding is very unusual but very useful: <code>Text = &quot;{Binding FieldNames[MyCustomFieldName]}&quot;</code>. This binding declares that there is a property within <code>DataContext</code> called <code>FieldNames</code> with a key called <code>MyCustomFieldName</code>. This <code>FieldNames</code> property is a <code>Dictionary&lt;string, string&gt;</code>.</p>
<p>I continually have forgotten since the release of <acronym title="Windows Communication Foundation">WCF</acronym> in 2007 that <code>Dictionary&lt;TKey, TValue&gt;</code> cannot be sent over the wire. I assume without being informed that <code>KeyedCollection&lt;TKey, TItem&gt;</code> was developed to address this issue (poorly—<a href="http://msdn.microsoft.com/en-us/library/ms132438.aspx">because</a> “…unlike dictionaries, an element of <code>KeyedCollection&lt;TKey, TItem&gt;</code> is not a key/value pair; instead, the entire element is the value and the key is embedded within the value.”).</p>
<p>My Band-Aid is to convert a set of <code>NameValuePair</code> into <code>Dictionary&lt;string, string&gt;</code> with an extension method. This is one way to address the problem of RIA Services lack of support for serializing <code>Dictionary&lt;T&gt;</code>. Once we have a Dictionary it can be bound to directly—in <acronym title="Extensible Application Markup Language">XAML</acronym>.</p>
<p>@<a href="https://twitter.com/BryanWilhite">BryanWilhite</a></p>


</section>
<section class="meta">
    <span class="entry-date"> <strong>incept date:</strong> EEEE, MMMM d, y </span>
</section>
        </main>
        <footer>
            <div class="col-sm-8">
                <p>
                    Last Reviewed:
                    2013-01-14T00:00:00.000Z
                </p>
                <p>
                    Another stone tribal move by <a class="welcome" href="http://songhaysystem.com/">Songhay System</a>
                </p>
            </div>
            <div class="col-sm-4">
                <a href="http://twitter.com/BryanWilhite" target="_blank" title="@BryanWilhite">
                    <span class="zocial twitter icon"></span>
                </a>
                <a href="http://songhayblog.azurewebsites.net/entry/feed.xml" target="_blank" title="Atom feed">
                    <span class="zocial rss icon"></span>
                </a>
            </div>
        </footer>
    </body>

</html>